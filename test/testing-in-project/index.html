<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="generator" content="Gatsby 4.23.0"/><meta data-react-helmet="true" name="description" content="우리 프로젝트의 테스팅 전략을 세워보자(storybook, react-testing-library, msw)"/><meta data-react-helmet="true" name="viewport" content="width=device-width, initial-scale=1.0"/><meta data-react-helmet="true" http-equiv="Content-Type" content="text/html;charset=UTF-8"/><meta data-react-helmet="true" property="og:type" content="website"/><meta data-react-helmet="true" property="og:title" content="하루스터디에서 프론트엔드 테스팅 전략"/><meta data-react-helmet="true" property="og:description" content="우리 프로젝트의 테스팅 전략을 세워보자(storybook, react-testing-library, msw)"/><meta data-react-helmet="true" property="og:image" content="/static/b5131199d1745ec1661647faca6213d5/testing.jpeg"/><meta data-react-helmet="true" property="og:url"/><meta data-react-helmet="true" property="og:site_name" content="하루스터디에서 프론트엔드 테스팅 전략"/><meta data-react-helmet="true" name="google-site-verification" content="ql22z_2Y_hxY79KKMHs_pLQVmom92VRl7YZ-86hVhZo"/><meta data-react-helmet="true" name="naver-site-verification" content="afb35c954ef587db6a8825631a9011d9d7652fdb"/><style data-href="/styles.811b76fa2f764e4356d7.css" data-identity="gatsby-global-css">code[class*=language-],pre[class*=language-]{word-wrap:normal;background:none;color:#ccc;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em;-webkit-hyphens:none;hyphens:none;line-height:1.5;-o-tab-size:4;tab-size:4;text-align:left;white-space:pre;word-break:normal;word-spacing:normal}pre[class*=language-]{margin:.5em 0;overflow:auto;padding:1em}:not(pre)>code[class*=language-],pre[class*=language-]{background:#2d2d2d}:not(pre)>code[class*=language-]{border-radius:.3em;padding:.1em;white-space:normal}.token.block-comment,.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#999}.token.punctuation{color:#ccc}.token.attr-name,.token.deleted,.token.namespace,.token.tag{color:#e2777a}.token.function-name{color:#6196cc}.token.boolean,.token.function,.token.number{color:#f08d49}.token.class-name,.token.constant,.token.property,.token.symbol{color:#f8c555}.token.atrule,.token.builtin,.token.important,.token.keyword,.token.selector{color:#cc99cd}.token.attr-value,.token.char,.token.regex,.token.string,.token.variable{color:#7ec699}.token.entity,.token.operator,.token.url{color:#67cdcc}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}.token.inserted{color:green}</style><link rel="canonical" href="https://yeopto.github.io/test/testing-in-project/" data-baseprotocol="https:" data-basehost="yeopto.github.io"/><title data-react-helmet="true">하루스터디에서 프론트엔드 테스팅 전략 - yeopto</title><style>.gatsby-image-wrapper{position:relative;overflow:hidden}.gatsby-image-wrapper picture.object-fit-polyfill{position:static!important}.gatsby-image-wrapper img{bottom:0;height:100%;left:0;margin:0;max-width:none;padding:0;position:absolute;right:0;top:0;width:100%;object-fit:cover}.gatsby-image-wrapper [data-main-image]{opacity:0;transform:translateZ(0);transition:opacity .25s linear;will-change:opacity}.gatsby-image-wrapper-constrained{display:inline-block;vertical-align:top}</style><noscript><style>.gatsby-image-wrapper noscript [data-main-image]{opacity:1!important}.gatsby-image-wrapper [data-placeholder-image]{opacity:0!important}</style></noscript><script type="module">const e="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;e&&document.body.addEventListener("load",(function(e){const t=e.target;if(void 0===t.dataset.mainImage)return;if(void 0===t.dataset.gatsbyImageSsr)return;let a=null,n=t;for(;null===a&&n;)void 0!==n.parentNode.dataset.gatsbyImageWrapper&&(a=n.parentNode),n=n.parentNode;const o=a.querySelector("[data-placeholder-image]"),r=new Image;r.src=t.currentSrc,r.decode().catch((()=>{})).then((()=>{t.style.opacity=1,o&&(o.style.opacity=0,o.style.transition="opacity 500ms linear")}))}),!0);</script><link rel="sitemap" type="application/xml" href="/sitemap.xml"/><link rel="alternate" type="application/rss+xml" title="yeopto&#x27;s Blog RSS Feed" href="/rss.xml"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><style data-emotion="css 13ku56z">.css-13ku56z{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;height:100%;}</style><main class="css-13ku56z exq8alc0"><style data-emotion="css-global pijd4z">@import url('https://fonts.googleapis.com/css2?family=Nanum+Myeongjo:wght@400;700;800&display=swap');*{padding:0;margin:0;box-sizing:border-box;font-family:'Nanum Myeongjo',serif;}html,body,#___gatsby{height:100%;}a,a:hover{color:inherit;-webkit-text-decoration:none;text-decoration:none;cusor:pointer;}</style><style data-emotion="css 16cz9yp">.css-16cz9yp{position:relative;width:100%;height:400px;}@media (max-width: 768px){.css-16cz9yp{height:300px;}}</style><div class="css-16cz9yp e1opi4mu1"><style data-emotion="css 1bjn9yo">.css-1bjn9yo{z-index:-1;width:100%;height:400px;object-fit:cover;-webkit-filter:brightness(0.25);filter:brightness(0.25);}@media (max-width: 768px){.css-1bjn9yo{height:300px;}}</style><div data-gatsby-image-wrapper="" style="position:absolute" class="gatsby-image-wrapper gatsby-image-wrapper-constrained css-1bjn9yo e1opi4mu0"><div style="max-width:402px;display:block"><img alt="" role="presentation" aria-hidden="true" src="data:image/svg+xml;charset=utf-8,%3Csvg height=&#x27;124.99999999999999&#x27; width=&#x27;402&#x27; xmlns=&#x27;http://www.w3.org/2000/svg&#x27; version=&#x27;1.1&#x27;%3E%3C/svg%3E" style="max-width:100%;display:block;position:static"/></div><img aria-hidden="true" data-placeholder-image="" style="opacity:1;transition:opacity 500ms linear" decoding="async" src="data:image/jpeg;base64,/9j/2wBDAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/2wBDAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/wgARCAAGABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAcG/8QAFgEBAQEAAAAAAAAAAAAAAAAABwUI/9oADAMBAAIQAxAAAAG1Y8DN6RkU1b//xAAaEAACAgMAAAAAAAAAAAAAAAADBQEEAgYU/9oACAEBAAEFAtVuAzAqfk47LGCn/8QAIREAAgIBAgcAAAAAAAAAAAAAAQIDEgQFEQAGIyRBQ8P/2gAIAQMBAT8Bjw8aTVeYI3jsoydIruz2Tv8AIUiN7XjBGwZUZQwC2BqNk0zBqvQ8D2TD6cf/xAAkEQABAwMCBwEAAAAAAAAAAAABAgMRBAUSACEVJDEyQlJhYv/aAAgBAgEBPwG32ygVSX9g0rZaFwpyE7yCplvKFzmJKiSAqMjl131wi3QnlUdjfk56I/f3X//EACEQAAICAQQCAwAAAAAAAAAAAAECAxESAAQTFCExI0Lh/9oACAEBAAY/AvljkJMUqq6kWpET40CaGDU6micvfjW677brfSdaJ1lnnMrcrTuHanrjGKqgVWK0t0Czakfj+x9n91//xAAZEAEBAAMBAAAAAAAAAAAAAAABESExQQD/2gAIAQEAAT8hUhsQXN2aUAiI44xyKgbgZ13dBG7O7zqArgOe/9oADAMBAAIAAwAAABCD7//EABgRAQADAQAAAAAAAAAAAAAAAAEAETEh/9oACAEDAQE/ECG0ooMAHjTQYltpbhMMAAcKAAorJ//EABkRAQEAAwEAAAAAAAAAAAAAAAERADGBkf/aAAgBAgEBPxBb0MGq6GJgqCQAxMtACqPSvc//xAAYEAEBAQEBAAAAAAAAAAAAAAABEQAhMf/aAAgBAQABPxDxom/KePhMgwBnpXpwk7BQ4+5o2rbEgJ9DmIvVd//Z" alt=""/><picture><source type="image/webp" data-srcset="/static/b5131199d1745ec1661647faca6213d5/1cb42/testing.webp 101w,/static/b5131199d1745ec1661647faca6213d5/1adb2/testing.webp 201w,/static/b5131199d1745ec1661647faca6213d5/147e5/testing.webp 402w" sizes="(min-width: 402px) 402px, 100vw"/><img data-gatsby-image-ssr="" data-main-image="" style="opacity:0" sizes="(min-width: 402px) 402px, 100vw" decoding="async" loading="lazy" data-src="/static/b5131199d1745ec1661647faca6213d5/81499/testing.jpg" data-srcset="/static/b5131199d1745ec1661647faca6213d5/76e5c/testing.jpg 101w,/static/b5131199d1745ec1661647faca6213d5/9dd57/testing.jpg 201w,/static/b5131199d1745ec1661647faca6213d5/81499/testing.jpg 402w" alt="thumbnail"/></picture><noscript><picture><source type="image/webp" srcSet="/static/b5131199d1745ec1661647faca6213d5/1cb42/testing.webp 101w,/static/b5131199d1745ec1661647faca6213d5/1adb2/testing.webp 201w,/static/b5131199d1745ec1661647faca6213d5/147e5/testing.webp 402w" sizes="(min-width: 402px) 402px, 100vw"/><img data-gatsby-image-ssr="" data-main-image="" style="opacity:0" sizes="(min-width: 402px) 402px, 100vw" decoding="async" loading="lazy" src="/static/b5131199d1745ec1661647faca6213d5/81499/testing.jpg" srcSet="/static/b5131199d1745ec1661647faca6213d5/76e5c/testing.jpg 101w,/static/b5131199d1745ec1661647faca6213d5/9dd57/testing.jpg 201w,/static/b5131199d1745ec1661647faca6213d5/81499/testing.jpg 402w" alt="thumbnail"/></picture></noscript><script type="module">const t="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;if(t){const t=document.querySelectorAll("img[data-main-image]");for(let e of t){e.dataset.src&&(e.setAttribute("src",e.dataset.src),e.removeAttribute("data-src")),e.dataset.srcset&&(e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset"));const t=e.parentNode.querySelectorAll("source[data-srcset]");for(let e of t)e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset");e.complete&&(e.style.opacity=1,e.parentNode.parentNode.querySelector("[data-placeholder-image]").style.opacity=0)}}</script></div><style data-emotion="css m1156n">.css-m1156n{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;width:768px;height:100%;margin:0 auto;padding:60px 0;color:#ffffff;}@media (max-width: 768px){.css-m1156n{width:100%;padding:40px 20px;}}</style><div class="css-m1156n e1st1jau3"><style data-emotion="css gywgo7">.css-gywgo7{display:grid;place-items:center;width:40px;height:40px;border-radius:50%;background:#ffffff;color:#000000;font-size:22px;cursor:pointer;box-shadow:0 0 10px rgba(0, 0, 0, 0.3);}@media (max-width: 768px){.css-gywgo7{width:30px;height:30px;font-size:18px;}}</style><div class="css-gywgo7 e1st1jau2"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="arrow-left" class="svg-inline--fa fa-arrow-left " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M9.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.2 288 416 288c17.7 0 32-14.3 32-32s-14.3-32-32-32l-306.7 0L214.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160z"></path></svg></div><style data-emotion="css gn4qtp">.css-gn4qtp{display:-webkit-box;overflow:hidden;overflow-wrap:break-word;margin-top:auto;text-overflow:ellipsis;white-space:normal;-webkit-line-clamp:2;-webkit-box-orient:vertical;font-size:45px;font-weight:800;}@media (max-width: 768px){.css-gn4qtp{font-size:30px;}}</style><div class="css-gn4qtp e1st1jau1">하루스터디에서 프론트엔드 테스팅 전략</div><style data-emotion="css 3gcnt2">.css-3gcnt2{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin-top:10px;font-size:18px;font-weight:700;}@media (max-width: 768px){.css-3gcnt2{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;font-size:15px;font-weight:400;}}</style><div class="css-3gcnt2 e1st1jau0"><div>Testing</div><div>2023.07.10.</div></div></div></div><style data-emotion="css 1mqn3zs">.css-1mqn3zs{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;width:768px;margin:0 auto;padding:100px 0;word-break:break-all;line-height:1.8;font-size:16px;font-weight:400;}.css-1mqn3zs p{padding:3px 0;}.css-1mqn3zs h1,.css-1mqn3zs h2,.css-1mqn3zs h3{font-weight:800;margin-bottom:10px;}.css-1mqn3zs *+h1,.css-1mqn3zs *+h2,.css-1mqn3zs *+h3{margin-top:40px;}.css-1mqn3zs hr+h1,.css-1mqn3zs hr+h2,.css-1mqn3zs hr+h3{margin-top:0;}.css-1mqn3zs h1{font-size:30px;}.css-1mqn3zs h2{font-size:25px;}.css-1mqn3zs h3{font-size:20px;}.css-1mqn3zs blockquote{margin:30px 0;padding:5px 15px;border-left:2px solid #000000;font-weight:800;}.css-1mqn3zs ol,.css-1mqn3zs ul{margin-left:20px;padding:30px 0;}.css-1mqn3zs hr{border:1px solid #000000;margin:50px 0;}.css-1mqn3zs a{color:#4263eb;-webkit-text-decoration:underline;text-decoration:underline;}.css-1mqn3zs pre[class*='language-']{margin:30px 0;padding:15px;font-size:15px;}.css-1mqn3zs pre[class*='language-']::-webkit-scrollbar-thumb{background:rgba(255, 255, 255, 0.5);border-radius:3px;}.css-1mqn3zs code[class*='language-'],.css-1mqn3zs pre[class*='language-']{tab-size:2;}@media (max-width: 768px){.css-1mqn3zs{width:100%;padding:80px 20px;line-height:1.6;font-size:14px;}.css-1mqn3zs h1{font-size:23px;}.css-1mqn3zs h2{font-size:20px;}.css-1mqn3zs h3{font-size:17px;}.css-1mqn3zs img{width:100%;}.css-1mqn3zs hr{margin:25px 0;}}</style><div class="css-1mqn3zs e1ijh0y10"><p>우테코 level3를 시작하면서 팀 프로젝트를 진행하게 되었다. 우리 팀에 대해서는 <a href="https://github.com/woowacourse-teams/2023-haru-study/wiki" target="_blank" rel="nofollow"><strong>여기서</strong></a> 확인할 수 있다!</p>
<p>프로젝트를 진행하며 개발에 들어가기 앞서 우리 팀(프론트엔드)은 테스트 진행을 어떻게 할지 논의했다.</p>
<p>여러 테스트 도구가 있지만, 우리는 <code class="language-text">storybook</code>, <code class="language-text">jest</code> 기반으로 <code class="language-text">react-testing-library</code>와 <code class="language-text">msw</code>를 사용하기로 했다.</p>
<br>
<p>이 글을 쓰는 이유는 다음과 같다.</p>
<ol>
<li>
<p>왜 이 테스트 도구들을 선택했는지에 대해 정리하고 싶었다.</p>
</li>
<li>
<p>테스트 환경 설정을 하면서 따로 설정해야하는 부분이 있었는데, 그 부분들을 기록으로 남기고 싶었다.</p>
</li>
</ol>
<p>이 순서대로 글을 써보겠다.</p>
<h2>테스트 도구 선택 과정</h2>
<p>먼저 도구를 정하기 전에 논의한 것이 있다. 우리는 무엇을 테스트 할지(테스트 대상), 어떻게 테스트를 할지, 그리고 언제 어디서 테스트할지에 대해 논의했다. 도구를 정하기 전에 이 논의를 먼저 진행한 이유는 현재 나와 있는 테스트 툴들이 관심사가 각기 다르기 때문이다. 예를들어 jest는 단위 테스트에 조금 더 적합하고, Cypress는 E2E 테스트에 좀 더 친화적이고 등 각자의 관심사가 다르기 때문에 테스트 대상을 정해야 대상에 어울리는 도구를 고를 수 있다고 판단했기 때문이다.</p>
<br>
<p>그래서 우리는 무엇을 테스트 할지 이야기했고, 첫 번째 테스트 대상은 <strong>유저가 원하는 것</strong>을 테스트 하기로 결정했다. 즉, <strong>유저의 행위</strong>를 중점적으로 테스트 하기로 한 것이다. 테스트 코드를 작성하는 이유는 서비스의 안정성을 평가하기 위함이기 때문에 우리 서비스가 제공하는 기능에 대해 제대로 동작하는지에 대한 테스트가 가장 중요하다고 생각을 했다. 예를 들어 유저가 하루스터디 Header에 있는 내 스터디란 버튼을 클릭했을 때 내 스터디에 관련된 내용이 뜨게 하는 기능 자체를 테스트하는 것이지, 유저가 관심 없는 부분 즉, 이 버튼을 눌렀을 때 상태가 어떻게 되는지나 버튼이 button 태그로 만들어 졌는지에 대해서는 테스트하지 않기로 했다.</p>
<br>
<p>유저의 행위를 테스트하려면 단일 컴포넌트를 테스트하는 것이 아닌 여러 컴포넌트들이 묶여 서로 상호작용하는 것을 테스트하게 될 것이므로 우리는 페이지 단위의 통합테스트(Integration Test)를 하기로 했다. 하나의 페이지에서 유저가 할 수 있는 행동을 기준으로 테스트를 작성하면 실제로 내부 구현이 바뀌고, 데이터를 다루는 방식이 바뀌더라도 테스트 코드의 변경 없이 유저에게 일관된 기능 제공을 보장할 수 있기 때문이다.</p>
<br>
<p>사용자 이벤트 처리 중심으로 테스트가 이뤄질테고, 이에 가장 적합한 테스트 도구인 Jest 기반의 <strong>React-testing-library</strong>를 사용하기로 결정했다. React-testing-library는 사용자 관점에서 애플리케이션 테스트하는 것을 강조하고 있고, DOM에 대한 접근을 getByText, getByTestId와 같은 메서드로 쉽게 DOM에 접근하여 테스트 코드를 작성할 수 있다는 장점이 있기에 우리 프로젝트에 적합한 테스트 도구라 생각했다.</p>
<br>
<p>기능 중에 어떤 버튼을 클릭하면 데이터를 받아와서 화면에 렌더링 시키는 경우가 있을 것이다. 이 경우엔 API와 통신하는 로직을 테스트해야 해야한다. React-testing-library를 사용하면서 jest를 사용하기 때문에 jest를 이용하여 fetch를 간단하게 모킹하여 테스트 코드를 작성할 수 있지만 <strong>Kent C. Dodds</strong>의 <a href="https://kentcdodds.com/blog/stop-mocking-fetch" target="_blank" rel="nofollow">Stop mocking fetch</a>란 글을 보고 우리는 <strong>msw</strong>를 사용하기로 결정했다. 우리가 생각할 때 Kent C가 말하는 것 중 가장 와 닿은것은 msw가 응답을 mocking하고 설정하기 위한 작업이 fetch mocking하는 것보다 훨씬 간단하고, 실제 서버 응답과 일치시키는 작업도 편리하다는 것이었다. 즉, 테스트 코드에 대한 리소스가 확실히 줄어든다는 것이다.</p>
<br>
<p>마지막으로 UI 테스트는 어떻게 하는 것이 좋을지 이야기했는데 이 또한 마찬가지로 jest를 이용하여 할 수 있었지만, 시각적으로 UI를 직접 볼 수 있고, 컴포넌트 단위로 스토리를 작성하여 UI 테스트 및 공유할 수 있는 <strong>StoryBook</strong>을 사용하기로 했다. 지금 프론트엔드 3명과 백엔드 4명이서 협업하고 있다. 개발만 하는 것이 아닌 기획도 같이하고 있기 때문에 이런 상황에서 기획한 디자인에 따라 개발한 컴포넌트를 스토리별로 문서화하고 백엔드 팀원들에게 직관적으로 보여줄 수 있다는 장점 또한 있어서 우리는 StoryBook을 사용하기로 했다.</p>
<br>
<p>이렇게 우리는 무엇을 테스트 하고, 어떻게 테스트 할지 정했다. 남은 것은 언제 어디서 테스트를 할지인데, 이 부분은 아직 명확히 정해진 것이 없다. 이번에 CI/CD를 구축하면서 CI 파이프라인에서 PR 생성 시 테스트 진행을 해서 테스트 실패 시 PR을 생성하지 않도록 하고 만약 테스트 성공하여 PR 생성이 된다면 merge 후 CD 파이프라인에서 테스트를 한번 더 진행하는 방식으로 하면 어떨까 생각만 하고 있는 중이다. 이 부분에 대해서는 추후에 정리할 예정이다.</p>
<br>
<p>이 외에도 테스트할 범위들은 더 많을 것이다. 성능 테스트라던지 접근성 테스트, 그리고 브라우저 호환성 테스트 등 많은 영역에서 테스트를 할 수 있을 것이다. 일단 개발에 들어가기 전에는 이 정도만 수립하고 들어가도 괜찮다고 생각했다. 사실 위에 서술한 테스트들은 해본 적이 없기도 하다. 나중에 프로젝트를 진행하면서 추가하게 된다면 정리해 볼 예정이다.</p>
<h2>testing-library 설정 tip</h2>
<p>CRA가 아닌 웹팩 기반으로 React 어플리케이션 환경을 설정했다. 그러다 보니 testing-library를 도입할 때 추가적으로 해줘야 하는 설정들이 있었다. 그 부분에 대해 간단하게 기록하려 한다.</p>
<h3>react-testing-libary 및 jest-dom 설치</h3>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">npm i -D @testing-library/react @testing-library/jest-dom</code></pre></div>
<p>cf) jest-dom을 깔면 dom에 관련된 테스팅 메서드들을 제공한다.</p>
<h3>jest 관련</h3>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">npm i -D jest jest-environment-jsdom @types/jest</code></pre></div>
<p>cf) jest에서 dom을 사용하기 위해 jest-environment-jsdom이 필요하다.</p>
<h3>babel 관련</h3>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">npm i -D @babel/preset-react @babel/plugin-transform-modules-commonjs @babel/plugin-transform-runtime </code></pre></div>
<h3>babel.config.js 설정</h3>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">presets</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">'@babel/preset-react'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">runtime</span><span class="token operator">:</span> <span class="token string">'automatic'</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">env</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token string">'@babel/plugin-transform-modules-commonjs'</span><span class="token punctuation">,</span>
        <span class="token string">'@babel/plugin-transform-runtime'</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre></div>
<h3>jest.config.js 설정</h3>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">testEnvironment</span><span class="token operator">:</span> <span class="token string">'jsdom'</span><span class="token punctuation">,</span> <span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre></div>
<h2>Reference</h2>
<ul>
<li><a href="https://yeoulcoding.me/244" target="_blank" rel="nofollow">https://yeoulcoding.me/244</a></li>
<li><a href="https://kentcdodds.com/blog/stop-mocking-fetch" target="_blank" rel="nofollow">https://kentcdodds.com/blog/stop-mocking-fetch</a></li>
<li>잘생긴 센트(testing-library 설정 tip)</li>
</ul></div><style data-emotion="css 1ihdgmw">.css-1ihdgmw{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;width:768px;margin:0 auto;}@media (max-width: 768px){.css-1ihdgmw{width:100%;padding:0 20px;}}</style><div class="css-1ihdgmw e1gqsjds0"></div><style data-emotion="css 9w9jmx">.css-9w9jmx{display:grid;place-items:center;margin-top:auto;padding:50px 0;font-size:15px;text-align:center;line-height:1.5;}@media (max-width: 768px){.css-9w9jmx{font-size:13px;}}</style><footer class="css-9w9jmx e1oae0v80">반갑습니다. 누군가에겐 도움이 되는 글을 쓰도록 노력하겠습니다.<br/>© October.2022 yeopto, Powered By Gatsby.</footer></main></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/test/testing-in-project/";window.___webpackCompilationHash="bc35fd24d4b8e5d85ffb";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-c9fa82aa5b1f9c65f078.js"],"app":["/app-a5c81a0fcbfd78304e2a.js"],"component---src-pages-404-tsx":["/component---src-pages-404-tsx-7a237b676ea586cd42d4.js"],"component---src-pages-index-tsx":["/component---src-pages-index-tsx-579c77ce7d45d4999b70.js"],"component---src-templates-post-template-tsx":["/component---src-templates-post-template-tsx-51126764f20399608196.js"]};/*]]>*/</script><script src="/polyfill-c9fa82aa5b1f9c65f078.js" nomodule=""></script><script src="/app-a5c81a0fcbfd78304e2a.js" async=""></script><script src="/framework-c57a9454c0e3bef16c3b.js" async=""></script><script src="/webpack-runtime-2b97bd194ed4feaa7a2c.js" async=""></script></body></html>