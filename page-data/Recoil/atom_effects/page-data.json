{"componentChunkName":"component---src-templates-post-template-tsx","path":"/Recoil/atom_effects/","result":{"data":{"site":{"siteMetadata":{"author":"yeopto"}},"allMarkdownRemark":{"edges":[{"node":{"html":"<p>장바구니 미션을 하면서 장바구니에 담겨있는 품목의 수량을 저장하기 위해 localStorage를 사용했는데, 컴포넌트 내에서 <code class=\"language-text\">useEffect</code>를 사용해 <code class=\"language-text\">cartList</code> 상태가 업데이트 되면 localStorage 데이터도 업데이트 시켜주는 방식으로 구현했었다.</p>\n<br>\n<p><code class=\"language-text\">cartList</code>를 <code class=\"language-text\">Recoil Atom</code>으로 관리해주고 있었고, <code class=\"language-text\">Atom</code>으로 관리되고 있다면,  <code class=\"language-text\">Atom Effects</code>를 사용하여 로컬스토리지와 동기화시킬 수 있다해서 <code class=\"language-text\">Atom Effect</code>를 사용하는 방식으로 로직을 바꿨다. 그리고 동기화 된 <code class=\"language-text\">cartList</code> 상태에 관련된 로직들을 <code class=\"language-text\">useCartList</code>란 Hook으로 분리하였다.</p>\n<br>\n<p>어떻게 변경했는지 코드와 함께 이야기 해보겠다.</p>\n<h2>Atom Effects</h2>\n<p>설명하기 전 Atom Effects에 대해 간략히 설명하겠다.</p>\n<p>Recoil 공식 문서를 보면 다음과 같이 설명되어있다.</p>\n<blockquote>\n<p>Atom Effects는 부수효과를 관리하고 Recoil의 atom을 초기화 또는 동기화하기 위한 API다.</p>\n</blockquote>\n<blockquote>\n<p>Atom Effects는 atom 정의의 일부로 정의되므로 각 atom은 자체적인 정책들을 지정하고 구성할 수 있다.</p>\n</blockquote>\n<blockquote>\n<p>Atom Effects는 effects 옵션을 통해 atoms에 연결되어있다. 각 atom이 초기화 될 때 우선 순위에 따라 호출되는 atom effect 함수들의 배열을 참조할 수 있다.</p>\n</blockquote>\n<p>설명을 보아하니 atom으로 관리하는 상태가 update될 시 effects 옵션 배열에 함수를 넣어주면 그 함수가 실행되는 것 같다.</p>\n<h2>기존 코드</h2>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token comment\">/* ProductItem.tsx */</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">ProductItem</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> product <span class=\"token punctuation\">}</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> product<span class=\"token operator\">:</span> Product <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> localStorageData<span class=\"token punctuation\">,</span> internalSetLocalStorageData <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token generic-function\"><span class=\"token function\">useLocalStorage</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span>CartItem<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span>\n    <span class=\"token string\">'cartList'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  \n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>quantity<span class=\"token punctuation\">,</span> setQuantity<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token generic-function\"><span class=\"token function\">useState</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span><span class=\"token builtin\">number</span><span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span>\n    localStorageData<span class=\"token punctuation\">.</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> data<span class=\"token punctuation\">.</span>product<span class=\"token punctuation\">.</span>id <span class=\"token operator\">===</span> product<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">)</span><span class=\"token operator\">?.</span>quantity <span class=\"token operator\">??</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>cartList<span class=\"token punctuation\">,</span> setCartList<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useRecoilState</span><span class=\"token punctuation\">(</span>cartListState<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  \n  <span class=\"token comment\">// 내부 로직 생략</span>\n  <span class=\"token punctuation\">.</span>\n  <span class=\"token punctuation\">.</span>\n  <span class=\"token punctuation\">.</span>\n  \n  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>quantity <span class=\"token operator\">!==</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">updateCartList</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token function\">deleteCartItem</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>quantity<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">internalSetLocalStorageData</span><span class=\"token punctuation\">(</span>cartList<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>cartList<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  \n    \n  <span class=\"token keyword\">return</span> <span class=\"token operator\">...</span></code></pre></div>\n<p>위에 보다시피 <code class=\"language-text\">cartList</code>에 관련된 로직이 <code class=\"language-text\">ProductItem</code>내부에 있고, 컴포넌트 내부에서 <code class=\"language-text\">useEffect</code>를 사용하여 로컬스토리지 데이터를 업데이트 시켜주고있다.</p>\n<br>\n<p>이제 <code class=\"language-text\">Atom Effects</code>를 사용하여 <code class=\"language-text\">cartList</code> 상태를 로컬스토리지와 동기화 되도록 만들어보자.</p>\n<h2>변경된 코드</h2>\n<p>atom을 localStorage와 동기화 시키는 코드는 다음과 같다.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token comment\">/* atom.ts */</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token keyword\">type</span> <span class=\"token punctuation\">{</span> AtomEffect <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'recoil'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> atom <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'recoil'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token keyword\">type</span> <span class=\"token punctuation\">{</span> CartItem <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'../types/types'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> localStorageEffect<span class=\"token operator\">:</span> <span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span>key<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> AtomEffect<span class=\"token operator\">&lt;</span><span class=\"token constant\">T</span><span class=\"token operator\">></span> <span class=\"token operator\">=</span>\n  <span class=\"token punctuation\">(</span>key<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span>\n  <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> setSelf<span class=\"token punctuation\">,</span> onSet <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> savedValue <span class=\"token operator\">=</span> localStorage<span class=\"token punctuation\">.</span><span class=\"token function\">getItem</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>savedValue <span class=\"token operator\">!==</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">setSelf</span><span class=\"token punctuation\">(</span><span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">parse</span><span class=\"token punctuation\">(</span>savedValue<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token function\">onSet</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>newValue<span class=\"token punctuation\">,</span> _<span class=\"token punctuation\">,</span> isReset<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>isReset<span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span> localStorage<span class=\"token punctuation\">.</span><span class=\"token function\">removeItem</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n      <span class=\"token keyword\">return</span> localStorage<span class=\"token punctuation\">.</span><span class=\"token function\">setItem</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">,</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span>newValue<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> cartListState <span class=\"token operator\">=</span> <span class=\"token generic-function\"><span class=\"token function\">atom</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span>CartItem<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  key<span class=\"token operator\">:</span> <span class=\"token string\">'cartLists'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token keyword\">default</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  effects<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token generic-function\"><span class=\"token function\">localStorageEffect</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span>CartItem<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span><span class=\"token string\">'cartList'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>이제 <code class=\"language-text\">cartListState</code>와 로컬스토리지에서 <code class=\"language-text\">cartList</code>란 key의 value가 동기화 되었다.</p>\n<br>\n<p>기존 <code class=\"language-text\">ProductItem</code> 컴포넌트에서 <code class=\"language-text\">cartList</code>와 관련된 로직들을 Hook으로 분리해보자.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token comment\">/* useCartList.ts */</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> useRecoilState <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'recoil'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> useEffect<span class=\"token punctuation\">,</span> useState <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token keyword\">type</span> <span class=\"token punctuation\">{</span> CartItem<span class=\"token punctuation\">,</span> Product <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'../types/types'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> cartListState <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'../store/atom'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">useCartList</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>product<span class=\"token operator\">:</span> Product<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>cartList<span class=\"token punctuation\">,</span> setCartList<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useRecoilState</span><span class=\"token punctuation\">(</span>cartListState<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> existItemIndex <span class=\"token operator\">=</span> cartList<span class=\"token punctuation\">.</span><span class=\"token function\">findIndex</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>cartItem<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> cartItem<span class=\"token punctuation\">.</span>product<span class=\"token punctuation\">.</span>id <span class=\"token operator\">===</span> product<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>quantity<span class=\"token punctuation\">,</span> setQuantity<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token generic-function\"><span class=\"token function\">useState</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span><span class=\"token builtin\">number</span><span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span>\n    existItemIndex <span class=\"token operator\">!==</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span> <span class=\"token operator\">?</span> cartList<span class=\"token punctuation\">[</span>existItemIndex<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>quantity <span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// 내부 로직 생략</span>\n  <span class=\"token punctuation\">.</span>\n  <span class=\"token punctuation\">.</span>\n  <span class=\"token punctuation\">.</span>\n  \n  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>quantity <span class=\"token operator\">!==</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">updateCartList</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token function\">deleteCartItem</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>quantity<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span> quantity<span class=\"token punctuation\">,</span> setQuantity <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<p>이 Hook을 <code class=\"language-text\">ProductItem</code> 컴포넌트에 사용해보자.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token comment\">/* ProductItem.tsx */</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> CartIcon <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'../../assets'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token keyword\">type</span> <span class=\"token punctuation\">{</span> Product <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'../../types/types'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Text <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'../common/Text/Text'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> InputStepper <span class=\"token keyword\">from</span> <span class=\"token string\">'../common/InputStepper/InputStepper'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> useCartList <span class=\"token keyword\">from</span> <span class=\"token string\">'../../hooks/useCartList'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">ProductItem</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> product <span class=\"token punctuation\">}</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> product<span class=\"token operator\">:</span> Product <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> quantity<span class=\"token punctuation\">,</span> setQuantity <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token function\">useCartList</span><span class=\"token punctuation\">(</span>product<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">handleOnClickToCartIcon</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">setQuantity</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">handleSetQuantityOnInputStepper</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>value<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">setQuantity</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token operator\">&lt;</span>ProductWrapper<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>ProductImage src<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>product<span class=\"token punctuation\">.</span>imageUrl<span class=\"token punctuation\">}</span> alt<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>product<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">}</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>ProductInfoWrapper<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>ProductTextWrapper<span class=\"token operator\">></span>\n          <span class=\"token operator\">&lt;</span>Text size<span class=\"token operator\">=</span><span class=\"token string\">\"smallest\"</span> weight<span class=\"token operator\">=</span><span class=\"token string\">\"light\"</span> color<span class=\"token operator\">=</span><span class=\"token string\">\"#333333\"</span><span class=\"token operator\">></span>\n            <span class=\"token punctuation\">{</span>product<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">}</span>\n          <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Text<span class=\"token operator\">></span>\n          <span class=\"token operator\">&lt;</span>Text size<span class=\"token operator\">=</span><span class=\"token string\">\"small\"</span> weight<span class=\"token operator\">=</span><span class=\"token string\">\"light\"</span> color<span class=\"token operator\">=</span><span class=\"token string\">\"#333333\"</span> lineHeight<span class=\"token operator\">=</span><span class=\"token string\">\"33px\"</span><span class=\"token operator\">></span>\n            <span class=\"token punctuation\">{</span>product<span class=\"token punctuation\">.</span>price<span class=\"token punctuation\">}</span> 원\n          <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Text<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>ProductTextWrapper<span class=\"token operator\">></span>\n        <span class=\"token punctuation\">{</span>quantity <span class=\"token operator\">===</span> <span class=\"token number\">0</span> <span class=\"token operator\">?</span> <span class=\"token punctuation\">(</span>\n          <span class=\"token operator\">&lt;</span>CartIcon\n            width<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token number\">25</span><span class=\"token punctuation\">}</span>\n            height<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token number\">22</span><span class=\"token punctuation\">}</span>\n            fill<span class=\"token operator\">=</span><span class=\"token string\">\"#AAAAAA\"</span>\n            style<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> transform<span class=\"token operator\">:</span> <span class=\"token string\">'scaleX(-1)'</span><span class=\"token punctuation\">,</span> cursor<span class=\"token operator\">:</span> <span class=\"token string\">'pointer'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n            onClick<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>handleOnClickToCartIcon<span class=\"token punctuation\">}</span>\n          <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n        <span class=\"token punctuation\">)</span> <span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>\n          <span class=\"token operator\">&lt;</span>InputStepper\n            size<span class=\"token operator\">=</span><span class=\"token string\">\"small\"</span>\n            quantity<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>quantity<span class=\"token punctuation\">}</span>\n            setQuantity<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>handleSetQuantityOnInputStepper<span class=\"token punctuation\">}</span>\n          <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\n      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>ProductInfoWrapper<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>ProductWrapper<span class=\"token operator\">></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<h2>정리</h2>\n<ul>\n<li><code class=\"language-text\">Atom Effects</code>를 사용한다면 Recoil로 관리되는 Atom들의 부수적인 효과들을 Atom 자체 내에서 관리할 수 있다.</li>\n<li>Recoil로 관리되는 상태들은 Recoil에서 제공하는 API를 최대한 활용하여 관리해보자.</li>\n</ul>\n<h2>참고</h2>\n<ul>\n<li><a href=\"https://recoiljs.org/ko/docs/guides/atom-effects\" target=\"_blank\" rel=\"nofollow\">https://recoiljs.org/ko/docs/guides/atom-effects</a></li>\n</ul>","frontmatter":{"title":"[Recoil] Atom Effects를 활용하여 상태를 LocalStorage에 동기화 시키기","summary":"장바구니 미션에서 Atom Effects 사용기","date":"2023.05.15.","categories":["Recoil"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","placeholder":{"fallback":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAIAAACgpqunAAAACXBIWXMAAAsTAAALEwEAmpwYAAABZklEQVQoz62S207CQBCGeUmjL2D0FdRrRaJRaAt4gJZIONSKQAtUQokk3MjBCAklNRHaAiEIF3vDTclu1whNY1ATRf+L2clsvtnNzO/Af5BjcSCEVod/JXMuC4YQKopiGIZ9YZomQuhzsvTHd9gwjLX1jfF4soDt+OWbGGMAwGj0asFSsZjNibwgYIx1XY+zbDYnvnQ66TQvZDKyLEdjMUHItFoyTTMFSapUqxeXAQu+y+f9Z+ceglw0ugqHmVCIIKkgzUQi0Z3dPVXT9F6PICkAQDKVch66aCZkwW4PwXLcbTKFMc6J4smpOxAMpnnedXTcaDbjcfahUpHlts/vl9vtGMvuHzgpr8+CnxoNkvLW648YY03TAAD9fr/b7d6XSuVyeTgc3iQSBUkaDAbXHFet1VRVVZRnC57NZptb25OJNTA010/3jBCaTqcQwo/TtrvYCUIIQmhXVjTJssO+W+z/29OG3wDyCAV9fjRtDAAAAABJRU5ErkJggg=="},"images":{"fallback":{"src":"/static/4489264affc6365b25336a2a58feb009/4b075/recoil.png","srcSet":"/static/4489264affc6365b25336a2a58feb009/77d3c/recoil.png 67w,\n/static/4489264affc6365b25336a2a58feb009/11b1e/recoil.png 134w,\n/static/4489264affc6365b25336a2a58feb009/4b075/recoil.png 267w","sizes":"(min-width: 267px) 267px, 100vw"},"sources":[{"srcSet":"/static/4489264affc6365b25336a2a58feb009/5837b/recoil.webp 67w,\n/static/4489264affc6365b25336a2a58feb009/f0f2e/recoil.webp 134w,\n/static/4489264affc6365b25336a2a58feb009/12d76/recoil.webp 267w","type":"image/webp","sizes":"(min-width: 267px) 267px, 100vw"}]},"width":267,"height":189}},"publicURL":"/static/4489264affc6365b25336a2a58feb009/recoil.png"}}}}]}},"pageContext":{"slug":"/Recoil/atom_effects/"}},"staticQueryHashes":[]}