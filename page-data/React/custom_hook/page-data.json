{"componentChunkName":"component---src-templates-post-template-tsx","path":"/React/custom_hook/","result":{"data":{"site":{"siteMetadata":{"author":"yeopto"}},"allMarkdownRemark":{"edges":[{"node":{"html":"<h1>일단 Hook의 등장배경을 알아보자</h1>\n<p>Hook이 도입되기 전에는 생명주기 메서드, 렌더링 로직, 상태 관리 등을 클래스 한 곳에 모아 컴포넌트를 만들었다.\n작은 규모의 어플리케이션에서는 문제가 없었지만, 규모가 큰 애플리케이션에서는 코드의 재사용성이 떨어질 수 밖에 없다.</p>\n<h3>클래스 컴포넌트가 코드 재사용성이 떨어지는 이유는 이러하다.</h3>\n<ol>\n<li>클래스 컴포넌트는 상속을 사용하여 구현하기 때문이다. 상속은 기본적으로 부모 클래스의 코드를 자식 클래스로 복사하여 재사용하는 방식으로 동작한다. 이러한 방식은 클래스간의 강한 결합성을 유발하기에 코드의 재사용성이 제한될 수 있다.</li>\n<li>클래스 컴포넌트에서는 클래스 내부에 있는 라이프사이클 메서드를 사용하여 컴포넌트의 동작을 제어한다. 라이프사이클 메서드는 컴포넌트 내부에서만 사용 가능하기때문에 다른 컴포넌트에서 재사용하기가 어렵다.</li>\n</ol>\n<p>이에 대안으로 React에서는 useState, useEffect와 같은 Hook을 도입하였다.\nHook은 함수형 컴포넌트에서 상태 관리를 할 수 있게 해주고, 코드의 간결함과 재사용성을 높이는 등의 장점들이 있다.</p>\n<h1>Custom Hook이란?</h1>\n<h3>그럼 Hook이 도입되기 이전에는 재사용할 수 있는 코드를 분리를 어떻게 했냐?</h3>\n<p>바로 HOC를 이용하는 것이다.(<a href=\"https://velopert.com/3537\" target=\"_blank\" rel=\"nofollow\">Higher Order Component, 고차 컴포넌트에 대한 링크</a>)\n<br>\n딱 봐도 복잡해보인다.\n<br>\nHOC를 사용하면 컴포넌트의 계층 구조가 복잡해지고, 가독성이 떨어지는 문제가 있다.</p>\n<br>\n<p>이러한 문제를 우리는 <code class=\"language-text\">Custom Hook</code>으로 재사용성을 높히고 코드의 간결함을 챙길 수 있게 되었다.\n<br>\n<code class=\"language-text\">Custom Hook</code>이란 상태 관리 로직을 재사용 가능한 함수로 추상화한 것.\n<br>\n<code class=\"language-text\">Custom Hook</code>을 사용하면 여러 컴포넌트에서 동일한 로직을 사용하고 싶을때 중복 코드를 줄일 수 있다.</p>\n<h1>적용 예시</h1>\n<p>이번 점심 뭐 먹지? 미션을 하면서 간단한 <code class=\"language-text\">Custom Hook</code>을 적용해보았다.\n<br>\nModal과 관련된 로직을 Hook으로 분리해보았다.\n<br>\n물론 이번 미션에서 Modal은 한 곳에서만 쓰인다.\n<br>\n굳이 분리할 필요가 있을까 싶지만 Modal은 여러 컴포넌트에서 쓰일 수 있다.\n<br>\n확장성을 고려하기도 했고, 연습도 해볼겸 <code class=\"language-text\">useModal</code>이란 <code class=\"language-text\">Custom Hook</code>을 만들었다.</p>\n<h3>Restaurants.tsx</h3>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Restaurants</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>restaurantId<span class=\"token punctuation\">,</span> setRestaurantId<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> category<span class=\"token punctuation\">,</span> sorting<span class=\"token punctuation\">,</span> handleCategoryChange<span class=\"token punctuation\">,</span> handleSortingChange <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token function\">useFilterOptions</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>isModalOpen<span class=\"token punctuation\">,</span> setIsModalOpen<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">/* 모달이 열려있는지 확인하는 boolean */</span>\n\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">handleRestaurantIdChange</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token literal-property property\">restaurantId</span><span class=\"token operator\">:</span> number</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span> <span class=\"token comment\">/* id 상태값을 변경해주고 모달창을 여는 함수 */</span>\n    <span class=\"token function\">setRestaurantId</span><span class=\"token punctuation\">(</span>restaurantId<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">setIsModalOpen</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  \n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">handleCloseModal</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span> <span class=\"token comment\">/* 모달창 닫는 함수 */</span>\n    <span class=\"token function\">setIsModalOpen</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  \n  <span class=\"token operator\">...</span>\n  \n  <span class=\"token keyword\">const</span> <span class=\"token literal-property property\">restaurantListProps</span><span class=\"token operator\">:</span> RestaurantListProps <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token operator\">...</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">changeRestaurantId</span><span class=\"token operator\">:</span> handleRestaurantIdChange<span class=\"token punctuation\">,</span> <span class=\"token comment\">/* 모달창 여는 함수를 props로 던져 줌 */</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  \n  <span class=\"token keyword\">const</span> <span class=\"token literal-property property\">modalProps</span><span class=\"token operator\">:</span> ModalProps <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">restaurantId</span><span class=\"token operator\">:</span> restaurantId<span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">handleClose</span><span class=\"token operator\">:</span> handleCloseModal<span class=\"token punctuation\">,</span> <span class=\"token comment\">/* 모달창 닫는 함수를 props로 던져 줌 */</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">RestaurantFilter</span></span> <span class=\"token spread\"><span class=\"token punctuation\">{</span><span class=\"token operator\">...</span>restaurantFilterProps<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">RestaurantsList</span></span> <span class=\"token spread\"><span class=\"token punctuation\">{</span><span class=\"token operator\">...</span>restaurantListProps<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n      </span><span class=\"token punctuation\">{</span>isModalOpen <span class=\"token operator\">&amp;&amp;</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Modal</span></span> <span class=\"token spread\"><span class=\"token punctuation\">{</span><span class=\"token operator\">...</span>modalProps<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> Restaurants<span class=\"token punctuation\">;</span></code></pre></div>\n<p>기존 코드는 이렇다. 주석으로 처리한 부분들을 <code class=\"language-text\">useModal</code>이라는 <code class=\"language-text\">Custom Hook</code> 으로 분리해보겠다.</p>\n<h3>useModal.tsx</h3>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">useModal</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token literal-property property\">isOpen</span><span class=\"token operator\">:</span> boolean</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>isModalOpen<span class=\"token punctuation\">,</span> setIsModalOpen<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span>isOpen<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">openModal</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">setIsModalOpen</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">closeModal</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">setIsModalOpen</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">toggleModal</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">setIsModalOpen</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">prevState</span> <span class=\"token operator\">=></span> <span class=\"token operator\">!</span>prevState<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span> isModalOpen<span class=\"token punctuation\">,</span> openModal<span class=\"token punctuation\">,</span> closeModal<span class=\"token punctuation\">,</span> toggleModal <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token template-punctuation string\">`</span></span>`</code></pre></div>\n<p><code class=\"language-text\">useModal</code>을 <code class=\"language-text\">Restaurants.tsx</code> 에 적용시켜보겠다.</p>\n<h3>Restaurants.tsx</h3>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> useModal <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'../../hooks/useModal'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Restaurants</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>restaurantId<span class=\"token punctuation\">,</span> setRestaurantId<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> category<span class=\"token punctuation\">,</span> sorting<span class=\"token punctuation\">,</span> handleCategoryChange<span class=\"token punctuation\">,</span> handleSortingChange <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token function\">useFilterOptions</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> isModalOpen<span class=\"token punctuation\">,</span> openModal<span class=\"token punctuation\">,</span> closeModal <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token function\">useModal</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">handleRestaurantIdChange</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token literal-property property\">restaurantId</span><span class=\"token operator\">:</span> number</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">setRestaurantId</span><span class=\"token punctuation\">(</span>restaurantId<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">openModal</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  \n  <span class=\"token operator\">...</span>\n  \n  <span class=\"token keyword\">const</span> <span class=\"token literal-property property\">restaurantListProps</span><span class=\"token operator\">:</span> RestaurantListProps <span class=\"token operator\">=</span>  <span class=\"token punctuation\">{</span>  \n\t <span class=\"token operator\">...</span><span class=\"token punctuation\">,</span> \n\t <span class=\"token literal-property property\">changeRestaurantId</span><span class=\"token operator\">:</span> handleRestaurantIdChange<span class=\"token punctuation\">,</span>  \n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  \n  <span class=\"token keyword\">const</span> <span class=\"token literal-property property\">modalProps</span><span class=\"token operator\">:</span> ModalProps <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">restaurantId</span><span class=\"token operator\">:</span> restaurantId<span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">handleClose</span><span class=\"token operator\">:</span> closeModal<span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">RestaurantFilter</span></span> <span class=\"token spread\"><span class=\"token punctuation\">{</span><span class=\"token operator\">...</span>restaurantFilterProps<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">RestaurantsList</span></span> <span class=\"token spread\"><span class=\"token punctuation\">{</span><span class=\"token operator\">...</span>restaurantListProps<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n      </span><span class=\"token punctuation\">{</span>isModalOpen <span class=\"token operator\">&amp;&amp;</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Modal</span></span> <span class=\"token spread\"><span class=\"token punctuation\">{</span><span class=\"token operator\">...</span>modalProps<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> Restaurants<span class=\"token punctuation\">;</span></code></pre></div>\n<p>이렇게 Hook으로 분리해주면 다른 컴포넌트에서도 <code class=\"language-text\">useModal</code> 하나로 모달을 열고 닫는 로직을 재사용할 수 있게 된다.</p>\n<h1>결론</h1>\n<p>Custom Hook을 사용하면 반복 되는 상태관리 로직을 분리할 수 있어 코드의 재사용성을 높힐 수 있다.</p>","frontmatter":{"title":"[React] Custom Hook을 적용해보자","summary":"점심 뭐 먹지 미션 Custom Hook 적용기","date":"2023.04.17.","categories":["React"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","placeholder":{"fallback":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA5UlEQVQoz62ST0sDMRDF+92loKD4BUQErXhUqAcRvIj0IHgW/9CLomC2bXa3q5tN3k/SatuoIFSH8EgeeTNvJmnxh2gtHgRhgsuIv8SvieZiD33Hi49YKbGjT1M/iKc3R56dEWuZOlZXb5Hpu0iyUD+A17fKTpyW2sjUNqwaHRe6d2wOdJjTq7ipOa+4rrmo1C00S/chrsVJyXqmFUPbqFtw69i1OsjZGuoop2PZt+pVnI1JxNPdwLM9sb1ndfkamTwwDjw1DD3PTWzhwWH83HkysLuaxyZiGZJWl3kqpdOerf/5JO8zu4H3czx8oQAAAABJRU5ErkJggg=="},"images":{"fallback":{"src":"/static/0ab0c5b23ba314bccb3d82f62233673d/6d64d/react.png","srcSet":"/static/0ab0c5b23ba314bccb3d82f62233673d/3124b/react.png 320w,\n/static/0ab0c5b23ba314bccb3d82f62233673d/a9636/react.png 640w,\n/static/0ab0c5b23ba314bccb3d82f62233673d/6d64d/react.png 1280w","sizes":"(min-width: 1280px) 1280px, 100vw"},"sources":[{"srcSet":"/static/0ab0c5b23ba314bccb3d82f62233673d/d8081/react.webp 320w,\n/static/0ab0c5b23ba314bccb3d82f62233673d/9b854/react.webp 640w,\n/static/0ab0c5b23ba314bccb3d82f62233673d/37011/react.webp 1280w","type":"image/webp","sizes":"(min-width: 1280px) 1280px, 100vw"}]},"width":1280,"height":727}},"publicURL":"/static/0ab0c5b23ba314bccb3d82f62233673d/react.png"}}}}]}},"pageContext":{"slug":"/React/custom_hook/"}},"staticQueryHashes":[]}